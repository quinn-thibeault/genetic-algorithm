# Genetic Algorithm in C #

This is a genetic algorithm in C. The target is a user defined string.

## Brief Overview of genetic algorithms ##
A genetic algorithm is a type of machine learning which models the Darwinian model of evolution. A group of possible solutions - called individuals or organisms - is generated and is called a population. Each organism contains a solution, called a genome. If a solution does not exist in the current population, a new population is generated from the most fit organisms, or in other words the organisms with solutions closest to the target. To generate this new population, the genomes of the organisms are combined, just like in natural procreation, to create a new, hopefully more fit, organism. Then this new population is evaluated again and the cycle continues until a solution is found. 

### Sequence of steps ###
```
Allocate population and buffer
initialize population

while(current generation < maximum generation)
	calculate population fitness
	sort population by fitness

	if(most fit organism has fitness of 0) quit

	crossover to generate new population in buffer
	swap pointers between old population and new population
```

### Population initialization ###
```
void random_genome(char* genome, int genomelength)
{
	for(int i=0;i<genomelength;++i){
		genome[i] = (rand() % 26) + 97;
	}
	genome[genomelength] = '\0';
}

void gen_random_population(struct organism pop[], int genomesize)
{
	for(int i=0;i<POPSIZE;++i){
		random_genome(pop[i].genome, genomesize);
	}
}

void init_population(struct organism* pop, int strlen)
{
	for(int i=0;i<POPSIZE;++i){
		pop[i].genome = malloc(sizeof(char) * strlen+1);
	}
}
```

Population initialization works by first allocating memory for each organism in the population to store its string genome - this is seen in `init_population()`. It is interesting to note that the memory is allocated one character larger than the actual size of the genome. This is to store the null terminator at the end of the string. The population is started in a random state by `gen_random_population()` which calls `random_genome()` on each member of the population. `random_genome()` simply fills the organism's genome memory with random lowercase characters.  

### Fitness Calculation ###
```
void calc_fitness(struct organism pop[], char* target, int strlen)
{
	unsigned int fitness;

	for(int i=0;i<POPSIZE;++i){
		fitness = 0;

		for(int j=0;j<strlen;++j){
			fitness += abs(target[j] - pop[i].genome[j]);
		}

		pop[i].fitness = fitness;
	}
}
```

Fitness for an organism is calculated by finding the difference between each of the characters in the target string and each individual's string. This means that an organism with a lower fitness is more fit, or a better match.

### Sorting population ###
```
void sort_by_fitness(struct organism pop[])
{
	for(int i=0;i<POPSIZE;++i){
		for(int j=0;j<POPSIZE-i-1;++j){
			if(pop[j].fitness > pop[j+1].fitness){
				struct organism temp = pop[j];
				pop[j] = pop[j+1];
				pop[j+1] = temp;
			}
		}
	}
}
```

The population is sorted by a basic bubble sort. The most fit organisms are located in the lower indexes - meaning the most fit organism in the population is at index 0.

### Crossover ###
```
void mutate(struct organism *org, int strlen)
{
	int r = rand() % strlen;
	char c = (rand() % 26) + 97;
	org->genome[r] = c;
}

void regen_population(struct organism pop[], struct organism buffer[], int strlen)
{
	buffer[0] = pop[0];
	buffer[1] = pop[1];

	for(int i=2;i<POPSIZE;++i){
		int p1 = rand() % (POPSIZE / 2);
		int p2 = rand() % (POPSIZE / 2);
		int r = rand() % strlen;

		for(int j=0;j<r;j++){
			buffer[i].genome[j] = pop[p1].genome[j];
		}

		for(int l=r;l<strlen;++l){
			buffer[i].genome[l] = pop[p2].genome[l];
		}

		buffer[i].genome[strlen] = '\0';
		if(r < MUT) mutate(&buffer[i], strlen);
	}
}
```

First, the two most fit organisms are simply copied over to the new population. This is called elitism. Then, the rest of the population is generated by randomly combining the genomes of two randomly selected parents in the first half of the previous population - which is comprised of organisms with good fitness. Then, the organism can be randomly selected for mutation, which flips only a single character in the genome of the individual.
